<head>
  <title>Home</title>
</head>

<body>
  <h1 id="demo">Hi</h1>
  <div id="content">
    <button id="C4">C4</button>
    <button id="E4">E4</button>
    <button id="G4">G4</button>
    <button id="B4">B4</button>
  </div>
  <input type="text" id="genes" value="C4,G4,A4,C4,C4,A4,G4,F4,B4">
  <br/>
  <a href="/auth">Connect with 23andMe</a>
  <script type="text/javascript" src="https://tonejs.github.io/build/Tone.min.js"></script>
  <script>
    var synth = new Tone.AMSynth().toMaster()

    var loop = new Tone.Loop(function(time){
      var data = document.getElementById('genes').value;
      var split = data.split(',');
      console.log(split[0])
      synth.triggerAttackRelease(split[0], "8n", time);
      split = split.splice(1,split.length);
      console.log(split)
      document.getElementById('genes').value = split;
    }, "4n")
    loop.start(0).stop('2m')

    document.querySelectorAll('button').forEach(function(button){
      button.addEventListener('mousedown', function(e){
        Tone.Transport.start('+0.1')
      });
    });
  </script>
</body>
